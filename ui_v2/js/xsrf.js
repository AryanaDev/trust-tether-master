function generateCSRFToken(){var token='';var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var length=16;for(var i=0;i<length;i++){token+=characters.charAt(Math.floor(Math.random()*characters.length));}
return token;}
function setCSRFTokenForAllForms(){var forms=document.getElementsByTagName('form');var xsrfToken=generateCSRFToken();for(var i=0;i<forms.length;i++){var form=forms[i];var csrfInput=form.querySelector('input[name="xsrfToken"]');csrfInput.value=xsrfToken;}}
function addSubmitEventListenersToForms(){var forms=document.getElementsByTagName('form');for(var i=0;i<forms.length;i++){var form=forms[i];form.addEventListener('submit',function(event){event.preventDefault();var xsrfToken=this.querySelector('input[name="xsrfToken"]').value;var formData=new FormData(this);formData.append('csrf_token',xsrfToken);var method=this.method.toUpperCase();if(method==='GET'){var url=this.action+'?'+new URLSearchParams(formData).toString();fetch(url).then(function(response){console.log(response);}).catch(function(error){console.error(error);});}else{fetch(this.action,{method:method,body:formData}).then(function(response){console.log(response);}).catch(function(error){console.error(error);});}});}}
document.addEventListener('DOMContentLoaded',function(){setCSRFTokenForAllForms();addSubmitEventListenersToForms();});